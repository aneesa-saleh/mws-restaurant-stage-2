"use strict";

var registerServiceWorker = function registerServiceWorker() {
  if (!navigator.serviceWorker) return;
  navigator.serviceWorker.register('/service-worker.js').catch(function (error) {
    return console.log(error);
  });
};

var cleanMapboxTilesCache = function cleanMapboxTilesCache() {
  caches.open('restaurant-reviews-map-tiles').then(function (cache) {
    return cache.keys().then(function (requests) {
      var length = requests.length;
      if (length <= 12) return; // keep only the 12 most recent tiles

      requests.slice(0, length - 12).forEach(function (request) {
        cache.delete(request);
      });
    });
  });
};

var openDatabase = function openDatabase() {
  if (!navigator.serviceWorker) return Promise.resolve();
  return idb.open('restaurant-reviews', 1, function (upgradeDb) {
    var store = upgradeDb.createObjectStore('restaurants', {
      keyPath: 'id'
    });
    store.createIndex('by-neighborhood', 'neighborhood');
    store.createIndex('by-cuisine', 'cuisine_type');
  });
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN3aGVscGVyLmpzIl0sIm5hbWVzIjpbInJlZ2lzdGVyU2VydmljZVdvcmtlciIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiY2xlYW5NYXBib3hUaWxlc0NhY2hlIiwiY2FjaGVzIiwib3BlbiIsInRoZW4iLCJjYWNoZSIsImtleXMiLCJyZXF1ZXN0cyIsImxlbmd0aCIsInNsaWNlIiwiZm9yRWFjaCIsInJlcXVlc3QiLCJkZWxldGUiLCJvcGVuRGF0YWJhc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImlkYiIsInVwZ3JhZGVEYiIsInN0b3JlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiY3JlYXRlSW5kZXgiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEscUJBQXFCLEdBQUcsU0FBeEJBLHFCQUF3QixHQUFNO0FBQ2xDLE1BQUksQ0FBQ0MsU0FBUyxDQUFDQyxhQUFmLEVBQThCO0FBRTlCRCxFQUFBQSxTQUFTLENBQUNDLGFBQVYsQ0FBd0JDLFFBQXhCLENBQWlDLG9CQUFqQyxFQUNHQyxLQURILENBQ1MsVUFBQUMsS0FBSztBQUFBLFdBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixLQUFaLENBQUo7QUFBQSxHQURkO0FBRUQsQ0FMRDs7QUFPQSxJQUFNRyxxQkFBcUIsR0FBRyxTQUF4QkEscUJBQXdCLEdBQU07QUFDbENDLEVBQUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLDhCQUFaLEVBQTRDQyxJQUE1QyxDQUNFLFVBQUFDLEtBQUs7QUFBQSxXQUFJQSxLQUFLLENBQUNDLElBQU4sR0FBYUYsSUFBYixDQUFrQixVQUFDRyxRQUFELEVBQWM7QUFBQSxVQUMvQkMsTUFEK0IsR0FDcEJELFFBRG9CLENBQy9CQyxNQUQrQjtBQUV2QyxVQUFJQSxNQUFNLElBQUksRUFBZCxFQUFrQixPQUZxQixDQUl2Qzs7QUFDQUQsTUFBQUEsUUFBUSxDQUFDRSxLQUFULENBQWUsQ0FBZixFQUFrQkQsTUFBTSxHQUFHLEVBQTNCLEVBQStCRSxPQUEvQixDQUF1QyxVQUFDQyxPQUFELEVBQWE7QUFDbEROLFFBQUFBLEtBQUssQ0FBQ08sTUFBTixDQUFhRCxPQUFiO0FBQ0QsT0FGRDtBQUdELEtBUlEsQ0FBSjtBQUFBLEdBRFA7QUFXRCxDQVpEOztBQWNBLElBQU1FLFlBQVksR0FBRyxTQUFmQSxZQUFlLEdBQU07QUFDekIsTUFBSSxDQUFDbkIsU0FBUyxDQUFDQyxhQUFmLEVBQThCLE9BQU9tQixPQUFPLENBQUNDLE9BQVIsRUFBUDtBQUU5QixTQUFPQyxHQUFHLENBQUNiLElBQUosQ0FBUyxvQkFBVCxFQUErQixDQUEvQixFQUFrQyxVQUFDYyxTQUFELEVBQWU7QUFDdEQsUUFBTUMsS0FBSyxHQUFHRCxTQUFTLENBQUNFLGlCQUFWLENBQTRCLGFBQTVCLEVBQTJDO0FBQ3ZEQyxNQUFBQSxPQUFPLEVBQUU7QUFEOEMsS0FBM0MsQ0FBZDtBQUdBRixJQUFBQSxLQUFLLENBQUNHLFdBQU4sQ0FBa0IsaUJBQWxCLEVBQXFDLGNBQXJDO0FBQ0FILElBQUFBLEtBQUssQ0FBQ0csV0FBTixDQUFrQixZQUFsQixFQUFnQyxjQUFoQztBQUNELEdBTk0sQ0FBUDtBQU9ELENBVkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZWdpc3RlclNlcnZpY2VXb3JrZXIgPSAoKSA9PiB7XG4gIGlmICghbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpIHJldHVybjtcblxuICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3NlcnZpY2Utd29ya2VyLmpzJylcbiAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcbn07XG5cbmNvbnN0IGNsZWFuTWFwYm94VGlsZXNDYWNoZSA9ICgpID0+IHtcbiAgY2FjaGVzLm9wZW4oJ3Jlc3RhdXJhbnQtcmV2aWV3cy1tYXAtdGlsZXMnKS50aGVuKFxuICAgIGNhY2hlID0+IGNhY2hlLmtleXMoKS50aGVuKChyZXF1ZXN0cykgPT4ge1xuICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHJlcXVlc3RzO1xuICAgICAgaWYgKGxlbmd0aCA8PSAxMikgcmV0dXJuO1xuXG4gICAgICAvLyBrZWVwIG9ubHkgdGhlIDEyIG1vc3QgcmVjZW50IHRpbGVzXG4gICAgICByZXF1ZXN0cy5zbGljZSgwLCBsZW5ndGggLSAxMikuZm9yRWFjaCgocmVxdWVzdCkgPT4ge1xuICAgICAgICBjYWNoZS5kZWxldGUocmVxdWVzdCk7XG4gICAgICB9KTtcbiAgICB9KSxcbiAgKTtcbn07XG5cbmNvbnN0IG9wZW5EYXRhYmFzZSA9ICgpID0+IHtcbiAgaWYgKCFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gIHJldHVybiBpZGIub3BlbigncmVzdGF1cmFudC1yZXZpZXdzJywgMSwgKHVwZ3JhZGVEYikgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXN0YXVyYW50cycsIHtcbiAgICAgIGtleVBhdGg6ICdpZCcsXG4gICAgfSk7XG4gICAgc3RvcmUuY3JlYXRlSW5kZXgoJ2J5LW5laWdoYm9yaG9vZCcsICduZWlnaGJvcmhvb2QnKTtcbiAgICBzdG9yZS5jcmVhdGVJbmRleCgnYnktY3Vpc2luZScsICdjdWlzaW5lX3R5cGUnKTtcbiAgfSk7XG59O1xuIl0sImZpbGUiOiJzd2hlbHBlci5qcyJ9
